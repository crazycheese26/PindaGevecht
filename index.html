<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jules de Pinda VS Micha de Pinda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

        body {
            font-family: 'Fredoka One', cursive;
            overflow: hidden;
            background: linear-gradient(135deg, #87CEEB 0%, #E0F7FA 100%);
            touch-action: none; /* Voorkomt standaard touch acties op mobiel */
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            background-color: #fff8e1; /* Zandkleurige achtergrond */
            border-radius: 12px;
            max-width: 100%;
            max-height: 100%;
        }

        .ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }

        .hud {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .player-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 15px;
            border: 3px solid #8B4513;
        }

        .health-bar {
            width: 200px;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #555;
            margin-top: 5px;
        }

        .health-fill {
            height: 100%;
            transition: width 0.2s ease-out;
        }

        #p1-health { background-color: #ff4444; }
        #p2-health { background-color: #4444ff; }

        .controls-hint {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: #555;
            font-size: 14px;
            opacity: 0.7;
        }

        /* Overlay voor start/einde */
        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: auto;
            z-index: 10;
        }

        .hidden {
            display: none !important;
        }

        .btn {
            background: #8B4513;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 24px;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Fredoka One', cursive;
            transition: transform 0.1s;
            box-shadow: 0 5px 0 #5e2f0d;
        }

        .btn:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        .title {
            font-size: 60px;
            color: #FFD700;
            text-shadow: 4px 4px 0 #8B4513;
            margin-bottom: 20px;
            text-align: center;
        }

        .winner-text {
            font-size: 40px;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 #000;
        }
    </style>
</head>
<body>

<div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <!-- UI Overlay -->
    <div class="ui-layer">
        <div class="hud">
            <!-- Speler 1 (Jules) -->
            <div class="player-score">
                <span style="color: #d32f2f; font-size: 24px;">Jules</span>
                <div class="health-bar">
                    <div id="p1-health-fill" class="health-fill" style="width: 100%; background-color: #d32f2f;"></div>
                </div>
            </div>

            <!-- VS Tekst -->
            <div style="font-size: 40px; color: #8B4513; align-self: center;">VS</div>

            <!-- Speler 2 (Micha) -->
            <div class="player-score">
                <span style="color: #1976D2; font-size: 24px;">Micha</span>
                <div class="health-bar">
                    <div id="p2-health-fill" class="health-fill" style="width: 100%; background-color: #1976D2;"></div>
                </div>
            </div>
        </div>

        <div class="controls-hint" id="controls-hint">
            <strong>Jules:</strong> WASD (Bewegen) + SPATIE (Schieten) &nbsp;|&nbsp; 
            <strong>Micha:</strong> Pijltjestoetsen (Bewegen) + ENTER (Schieten)
        </div>
    </div>

    <!-- Start / Game Over Scherm -->
    <div id="overlay">
        <h1 class="title">Jules vs Micha</h1>
        <div id="winner-display" class="winner-text hidden"></div>
        <button class="btn" id="start-btn" onclick="startGame()">START GEVECHT</button>
    </div>
</div>

<script>
    // --- Configuratie & Variabelen ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Spelstatus
    let gameRunning = false;
    let particles = [];
    let projectiles = [];
    
    // Canvas grootte instellen (HD)
    function resizeCanvas() {
        canvas.width = Math.min(window.innerWidth - 20, 1000);
        canvas.height = Math.min(window.innerHeight - 20, 600);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Speler Objecten
    const players = {
        p1: {
            x: 100,
            y: 0, // wordt gezet in reset
            width: 60,
            height: 90,
            color: '#E1C699', // Pinda kleur
            secondaryColor: '#d32f2f', // Jules rood
            speed: 5,
            vx: 0,
            vy: 0,
            hp: 100,
            maxHp: 100,
            direction: 1, // 1 rechts, -1 links
            name: "Jules",
            keys: { up: 'w', down: 's', left: 'a', right: 'd', shoot: ' ' },
            cooldown: 0,
            face: 'happy'
        },
        p2: {
            x: 0, // wordt gezet in reset
            y: 0,
            width: 60,
            height: 90,
            color: '#E1C699',
            secondaryColor: '#1976D2', // Micha blauw
            speed: 5,
            vx: 0,
            vy: 0,
            hp: 100,
            maxHp: 100,
            direction: -1,
            name: "Micha",
            keys: { up: 'ArrowUp', down: 'ArrowDown', left: 'ArrowLeft', right: 'ArrowRight', shoot: 'Enter' },
            cooldown: 0,
            face: 'cool'
        }
    };

    // Input state
    const keysPressed = {};

    window.addEventListener('keydown', (e) => {
        keysPressed[e.key] = true;
        // Voorkom scrollen met spatie/pijltjes
        if(["Space", "ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].indexOf(e.code) > -1) {
            e.preventDefault();
        }
    });
    
    window.addEventListener('keyup', (e) => {
        keysPressed[e.key] = false;
    });

    // --- Game Functies ---

    function resetGame() {
        // Reset posities
        players.p1.x = 100;
        players.p1.y = canvas.height / 2 - 45;
        players.p1.hp = 100;
        players.p1.vx = 0;
        players.p1.vy = 0;
        players.p1.direction = 1;

        players.p2.x = canvas.width - 160;
        players.p2.y = canvas.height / 2 - 45;
        players.p2.hp = 100;
        players.p2.vx = 0;
        players.p2.vy = 0;
        players.p2.direction = -1;

        projectiles = [];
        particles = [];
        
        updateHealthUI();
        
        document.getElementById('overlay').classList.add('hidden');
        document.getElementById('winner-display').classList.add('hidden');
        
        gameRunning = true;
        requestAnimationFrame(gameLoop);
    }

    function startGame() {
        resetGame();
    }

    function endGame(winnerName) {
        gameRunning = false;
        const overlay = document.getElementById('overlay');
        const winnerText = document.getElementById('winner-display');
        const startBtn = document.getElementById('start-btn');
        
        overlay.classList.remove('hidden');
        winnerText.innerText = `${winnerName} wint de Pinda Strijd!`;
        winnerText.classList.remove('hidden');
        startBtn.innerText = "NOG EEN KEER";
    }

    function updatePhysics() {
        [players.p1, players.p2].forEach(p => {
            // Beweging
            if (keysPressed[p.keys.left]) { p.vx = -p.speed; p.direction = -1; }
            else if (keysPressed[p.keys.right]) { p.vx = p.speed; p.direction = 1; }
            else { p.vx *= 0.8; } // frictie

            if (keysPressed[p.keys.up]) { p.vy = -p.speed; }
            else if (keysPressed[p.keys.down]) { p.vy = p.speed; }
            else { p.vy *= 0.8; }

            // Positie updaten
            p.x += p.vx;
            p.y += p.vy;

            // Grenzen bewaken
            if (p.x < 0) p.x = 0;
            if (p.x + p.width > canvas.width) p.x = canvas.width - p.width;
            if (p.y < 0) p.y = 0;
            if (p.y + p.height > canvas.height) p.y = canvas.height - p.height;

            // Schieten
            if (p.cooldown > 0) p.cooldown--;
            if (keysPressed[p.keys.shoot] && p.cooldown <= 0) {
                shoot(p);
                p.cooldown = 20; // vertraging tussen schoten
            }
        });

        // Projectielen updaten
        for (let i = projectiles.length - 1; i >= 0; i--) {
            let proj = projectiles[i];
            proj.x += proj.vx;
            proj.y += proj.vy;
            proj.life--;

            // Check botsing met muren
            if (proj.x < 0 || proj.x > canvas.width || proj.life <= 0) {
                projectiles.splice(i, 1);
                continue;
            }

            // Check botsing met tegenstander
            let target = proj.owner === "Jules" ? players.p2 : players.p1;
            
            if (
                proj.x < target.x + target.width &&
                proj.x + proj.size > target.x &&
                proj.y < target.y + target.height &&
                proj.y + proj.size > target.y
            ) {
                // RAAK!
                createParticles(target.x + target.width/2, target.y + target.height/2, target.color);
                target.hp -= 10;
                projectiles.splice(i, 1);
                updateHealthUI();
                
                // Terugslag
                target.vx += proj.vx * 0.5;
                
                if (target.hp <= 0) {
                    endGame(proj.owner);
                }
            }
        }

        // Particles updaten
        for (let i = particles.length - 1; i >= 0; i--) {
            let part = particles[i];
            part.x += part.vx;
            part.y += part.vy;
            part.life--;
            part.alpha -= 0.02;
            if (part.life <= 0) particles.splice(i, 1);
        }
    }

    function shoot(player) {
        // Schiet in de richting waarin gekeken wordt, of standaard naar de vijand toe als stilstand
        let speed = 10;
        let vx = speed * player.direction;
        
        projectiles.push({
            x: player.x + player.width/2,
            y: player.y + player.height/2,
            vx: vx,
            vy: 0, // recht vooruit
            size: 10,
            color: player.secondaryColor,
            owner: player.name,
            life: 100
        });
    }

    function createParticles(x, y, color) {
        for(let i=0; i<10; i++) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10,
                life: 30,
                color: color,
                alpha: 1
            });
        }
    }

    function updateHealthUI() {
        document.getElementById('p1-health-fill').style.width = players.p1.hp + '%';
        document.getElementById('p2-health-fill').style.width = players.p2.hp + '%';
    }

    // --- Render Functies (Teken de pinda's) ---

    function drawPeanut(ctx, p) {
        ctx.save();
        ctx.translate(p.x + p.width/2, p.y + p.height/2);
        
        // Pinda's wiebelen een beetje als ze lopen
        let wobble = 0;
        if(Math.abs(p.vx) > 0.1 || Math.abs(p.vy) > 0.1) {
            wobble = Math.sin(Date.now() / 100) * 0.2;
        }
        ctx.rotate(wobble);

        // Spiegelen als ze naar links kijken
        if (p.direction === -1) {
            ctx.scale(-1, 1);
        }

        // Pinda Lichaam (Figuur 8 vorm)
        ctx.fillStyle = p.color;
        ctx.strokeStyle = '#8B4513'; // Donkerbruine rand
        ctx.lineWidth = 3;

        // Bovenkant pinda
        ctx.beginPath();
        ctx.ellipse(0, -20, 25, 22, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.stroke();

        // Onderkant pinda
        ctx.beginPath();
        ctx.ellipse(0, 20, 28, 25, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.stroke();

        // Gezicht
        ctx.fillStyle = '#000';
        
        // Ogen
        if (p.name === "Jules") {
            // Jules: Grote blije ogen
            ctx.beginPath();
            ctx.arc(10, -25, 4, 0, Math.PI*2); // R
            ctx.arc(-5, -25, 4, 0, Math.PI*2); // L
            ctx.fill();
            
            // Hoofdband (Jules kenmerk)
            ctx.fillStyle = p.secondaryColor;
            ctx.fillRect(-26, -45, 52, 10);
        } else {
            // Micha: Bril / Cool
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.rect(-10, -28, 10, 6);
            ctx.rect(5, -28, 10, 6);
            ctx.fill();
            // Brilmontuur
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, -25);
            ctx.lineTo(5, -25);
            ctx.stroke();
            
            // Petje (Micha kenmerk)
            ctx.fillStyle = p.secondaryColor;
            ctx.beginPath();
            ctx.arc(0, -38, 25, Math.PI, 0);
            ctx.fill();
            ctx.fillRect(-25, -40, 50, 5); // klep
        }

        // Mond
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 2;
        ctx.beginPath();
        if(p.hp < 30) {
            // Zielig
            ctx.arc(0, 30, 10, Math.PI, 0);
        } else {
            // Blij
            ctx.arc(0, 20, 10, 0, Math.PI);
        }
        ctx.stroke();

        // Handjes (Simpele cirkels)
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(25, 10, 8, 0, Math.PI*2); // Voorste hand
        ctx.fill();
        ctx.stroke();

        ctx.restore();
        
        // Naam boven hoofd
        ctx.fillStyle = '#333';
        ctx.font = '16px Fredoka One';
        ctx.textAlign = 'center';
        ctx.fillText(p.name, p.x + p.width/2, p.y - 10);
    }

    function draw() {
        // Achtergrond wissen
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Decoratie (Vloer schaduw)
        ctx.fillStyle = 'rgba(0,0,0,0.05)';
        ctx.beginPath();
        ctx.ellipse(canvas.width/2, canvas.height/2 + 50, 300, 100, 0, 0, Math.PI*2);
        ctx.fill();

        // Projectielen
        projectiles.forEach(p => {
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
            ctx.fill();
            // Pinda textuur op kogel
            ctx.fillStyle = 'rgba(255,255,255,0.4)';
            ctx.beginPath();
            ctx.arc(p.x - 2, p.y - 2, p.size/3, 0, Math.PI*2);
            ctx.fill();
        });

        // Spelers
        drawPeanut(ctx, players.p1);
        drawPeanut(ctx, players.p2);

        // Particles
        particles.forEach(p => {
            ctx.globalAlpha = p.alpha;
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, 4, 4);
            ctx.globalAlpha = 1;
        });
    }

    // Game Loop
    function gameLoop() {
        if (!gameRunning) return;
        
        updatePhysics();
        draw();
        
        requestAnimationFrame(gameLoop);
    }

    // Eerste draw voor start
    resizeCanvas();
    draw();

</script>
</body>
</html>
